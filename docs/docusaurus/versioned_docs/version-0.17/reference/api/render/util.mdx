---
title: util.py
sidebar_label: util.py
---
import CodeBlock from '@theme/CodeBlock';

<section class="sphinx-api-doc" id="util">

<p>Rendering utility</p>
<dl class="py function">
<dt class="sig sig-object py">
<span class="sig-prename descclassname"><span class="pre">great_expectations.render.util.</span></span><span class="sig-name descname"><span class="pre">handle_strict_min_max</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">params</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">→</span> <span class="sig-return-typehint"><span class="pre">tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span></span></dt>
<dd><p>Utility function for the at least and at most conditions based on strictness.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>params</strong> – Dictionary containing "strict_min" and "strict_max" booleans.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Tuple of strings to use for the at least condition and the at most condition.</p>
</dd>
</dl>
</dd></dl>
<dl class="py function">
<dt class="sig sig-object py">
<span class="sig-prename descclassname"><span class="pre">great_expectations.render.util.</span></span><span class="sig-name descname"><span class="pre">num_to_str</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">f</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">float</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">precision</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">15</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">use_locale</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">no_scientific</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">→</span> <span class="sig-return-typehint"><span class="pre">str</span></span></span></dt>
<dd><p>Convert the given float to a string, centralizing standards for precision and decisions about scientific     notation. Adds an approximately equal sign in the event precision loss (e.g. rounding) has occurred.</p>
<dl class="simple">
<dt>For more context, please review the following:</dt><dd><p><a class="reference external" href="https://stackoverflow.com/questions/38847690/convert-float-to-string-in-positional-format-without-scientific-notation-and-fa">Convert-Float-To-String-In-Positional-Format-Without-Scientific-Notation-And-Fa</a></p>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>f</strong> – The number to format.</p></li>
<li><p><strong>precision</strong> – The number of digits of precision to display (defaults to 4).</p></li>
<li><p><strong>use_locale</strong> – If True, use locale-specific formatting (e.g. adding thousands separators).</p></li>
<li><p><strong>no_scientific</strong> – If True, print all available digits of precision without scientific notation. This may insert
leading zeros before very small numbers, causing the resulting string to be longer than <cite>precision</cite>
characters.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A string representation of the input float <cite>f</cite>, according to the desired parameters.</p>
</dd>
</dl>
</dd></dl>
<dl class="py function">
<dt class="sig sig-object py">
<span class="sig-prename descclassname"><span class="pre">great_expectations.render.util.</span></span><span class="sig-name descname"><span class="pre">parse_row_condition_string_pandas_engine</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">condition_string</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">with_schema</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">→</span> <span class="sig-return-typehint"><span class="pre">tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">dict</span><span class="p"><span class="pre">]</span></span></span></span></dt>
<dd><p>Parses the row condition string into a pandas engine compatible format.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>condition_string</strong> – A pandas row condition string.</p></li>
<li><p><strong>with_schema</strong> – Return results in json schema format. Defaults to False.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A tuple containing the template string and a <cite>dict</cite> of parameters.</p>
</dd>
</dl>
<p><CodeBlock language="python">{`>>> template_str, params = parse_row_condition_string_pandas_engine("Age in [0, 42]")
>>> print(template_str)
"if $row_condition__0"
>>> params
{"row_condition__0": "Age in [0, 42]"}`}</CodeBlock></p>
</dd></dl>
<dl class="py function">
<dt class="sig sig-object py">
<span class="sig-prename descclassname"><span class="pre">great_expectations.render.util.</span></span><span class="sig-name descname"><span class="pre">substitute_none_for_missing</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">kwargs</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">kwarg_list</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Sequence</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">→</span> <span class="sig-return-typehint"><span class="pre">dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span></span></span></dt>
<dd><p>Utility function to plug Nones in when optional parameters are not specified in expectation kwargs.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>kwargs</strong> – A dictionary of keyword arguments.</p></li>
<li><p><strong>kwargs_list</strong> – A list or sequence of strings representing all possible keyword parameters to a function.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A copy of the original <cite>kwargs</cite> with missing keys from <cite>kwarg_list</cite> defaulted to <cite>None</cite>.</p>
</dd>
</dl>
<p><CodeBlock language="python">{`>>> result = substitute_none_for_missing(
…    kwargs={"a":1, "b":2},
…    kwarg_list=["c", "d"]
… )
… print(result)
{"a":1, "b":2, "c": None, "d": None}`}</CodeBlock></p>
<p>This is helpful for standardizing the input objects for rendering functions.
The alternative is lots of awkward <cite>if "some_param" not in kwargs or kwargs["some_param"] == None:</cite> clauses in renderers.</p>
</dd></dl>
</section>